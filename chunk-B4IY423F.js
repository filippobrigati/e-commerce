import{d as F,g as R}from"./chunk-PUT3JXNL.js";import{a as V}from"./chunk-M6IP3IK3.js";import{a as O}from"./chunk-W777NODM.js";import{f as _,g as N,l as $}from"./chunk-ZCVQGBTO.js";import{a as G,h as H,i as U}from"./chunk-LJVENVG4.js";import{a as q}from"./chunk-UDLAXCIX.js";import{Aa as L,Fa as S,L as I,Na as T,Oa as j,Q as s,V as E,Va as d,W as P,Wa as o,Xa as i,Ya as f,Za as k,a as w,ab as A,b as D,bb as b,da as m,gb as l,hb as C,ib as g,kb as B,lb as M,rb as h,sa as n}from"./chunk-ESOBYACX.js";var x=class r{http=s($);cart=s(O);getProductById(t){return this.http.get(`${V.apiURL}/products/${t}`)}addToCart(t,e=1){this.cart.add(t,e)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=I({token:r,factory:r.\u0275fac,providedIn:"root"})};var J=()=>[R,_,H,N,import("./chunk-OOAFAZON.js").then(r=>r.AddToCart)];function K(r,t){if(r&1){let e=k();o(0,"div",1)(1,"div",2),f(2,"i-lucide",3),o(3,"span",4),l(4,"Go back"),i()()(),o(5,"div",5)(6,"div",6),f(7,"div",7),i(),o(8,"div",8)(9,"p",9),l(10),i(),o(11,"p",10),l(12),i(),o(13,"div",11)(14,"span",12)(15,"span",13),l(16),i(),l(17,"/5"),i(),l(18," score with "),o(19,"span",13),l(20),i(),l(21," review! "),i(),o(22,"p",14),l(23),B(24,"currency"),i(),o(25,"app-add-to-cart",15),A("addToCart",function(u){E(e);let p=b();return P(p.addToCart(u))}),i()()()}if(r&2){let e,a,u,p,v,y,c=b();n(2),d("img",c.BackIcon),n(5),d("ngClass",(e=c.product())==null?null:e.color),n(3),g(" ",(a=c.product())==null?null:a.title," "),n(2),g(" ",(u=c.product())==null?null:u.description," "),n(3),d("ngClass",c.rateColor()),n(),C((p=c.product())==null||p.rating==null?null:p.rating.rate),n(3),d("ngClass",c.reviewColor()),n(),C((v=c.product())==null||v.rating==null?null:v.rating.count),n(3),g(" ",M(24,9,(y=c.product())==null?null:y.price)," ")}}function Q(r,t){r&1&&f(0,"app-loading-spinner")}var W=class r{service=s(x);route=s(F);BackIcon=G;productId=m(null);product=m(null);isLoading=m(!0);rateColor=h(()=>{let t=this.product()?.rating.rate;return t?t<2?"text-yellow-500":t<4?"text-green-500":"text-violet-500":"text-red-500"});reviewColor=h(()=>{let t=this.product()?.rating.count;return t?t<50?"text-yellow-500":t<300?"text-green-500":"text-violet-500":"text-red-500"});constructor(){this.route.paramMap.subscribe(t=>{let e=parseInt(t.get("id")??"",10);isNaN(e)||(this.productId.set(e),this.fetchProduct(e))})}addToCart(t){try{let e=this.product();if(!e)throw new Error("Missing product");this.service.addToCart(e,t)}catch(e){alert(`Error occurred: ${e instanceof Error?e.message:e}`)}}fetchProduct(t){try{this.isLoading.set(!0),this.service.getProductById(t).subscribe({next:e=>{let a=D(w({},e),{color:this.getColor(e.id)});this.product.set(a),this.isLoading.set(!1)},error:e=>{alert(`Error occurred on loading product: ${e}`),this.isLoading.set(!1)}})}catch(e){console.error(e)}}getColor(t){let e=["bg-green-50","bg-amber-50","bg-teal-50","bg-blue-50","bg-rose-50","bg-purple-50","bg-orange-50","bg-yellow-50","bg-lime-50","bg-cyan-50","bg-indigo-50","bg-fuchsia-50"],a=t%e.length;return e[a]}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=L({type:r,selectors:[["app-detail"]],decls:5,vars:2,consts:[[1,"w-full",3,"ngClass"],[1,"flex","flex-row","justify-start","items-center","border-b","border-gray-200","py-2","px-4"],["routerLink","/",1,"flex","flex-row","justify-center","items-center","text-blue-500","cursor-pointer"],[1,"w-5","h-5",3,"img"],[1,"ps-1"],[1,"p-4","grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"col-span-1","flex","justify-center","items-center"],[1,"w-full","max-w-[600px]","max-h-[600px]","aspect-square",3,"ngClass"],[1,"col-span-1"],[1,"text-3xl","font-semibold"],[1,"py-8","text-gray-600"],[1,"py-4"],[1,"monospace-text"],[1,"monospace-text",3,"ngClass"],[1,"py-8","text-2xl","monospace-text","text-slate-500"],[3,"addToCart"]],template:function(e,a){e&1&&(o(0,"div",0),S(1,K,26,11)(2,Q,1,0),T(3,1,J,null,2),i()),e&2&&(d("ngClass",a.isLoading()?"h-full":""),n(3),j(!a.isLoading()))},dependencies:[q,_,U],encapsulation:2})};export{W as Detail};
