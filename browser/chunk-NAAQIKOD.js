import{a as A,b as y,c as O,f as R,g as j,h as B,k as L,l as G,m as H}from"./chunk-YL4WXWRK.js";import{g as F}from"./chunk-PUT3JXNL.js";import{a as $}from"./chunk-W777NODM.js";import{f as D,g as M}from"./chunk-ZCVQGBTO.js";import{Aa as f,Q as w,Qa as I,Ra as q,Sa as T,Ta as V,Ua as N,V as s,Va as p,W as v,Wa as e,Xa as t,Ya as g,Za as S,ab as m,bb as u,da as P,gb as i,hb as l,kb as x,lb as b,rb as Q,sa as a,sb as k,ub as h,vb as E}from"./chunk-ESOBYACX.js";var C=class o{product=E.required();quantity=E.required();removeProduct=h();updateQuantity=h();quantityControl=new R(0,[y.required,y.min(1),y.max(10)]);constructor(){k(()=>{let r=this.quantity();r&&!isNaN(r)&&this.quantityControl.setValue(r)}),this.quantityControl.valueChanges.subscribe(()=>{if(this.quantityControl.invalid)return;let r=this.quantityControl.value;!r||r===this.quantity()||this.updateQuantity.emit(r)})}remove(){this.removeProduct.emit(this.product().id)}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=f({type:o,selectors:[["app-invoice-product"]],inputs:{product:[1,"product"],quantity:[1,"quantity"]},outputs:{removeProduct:"removeProduct",updateQuantity:"updateQuantity"},decls:12,vars:4,consts:[[1,"w-full","border-b","border-gray-200","flex","flex-col","gap-3","p-4"],[1,"flex","flex-row","gap-3"],[1,"w-26","h-26","aspect-square",3,"ngClass"],[1,"flex","flex-col","justify-start","items-start"],[1,"font-semibold","line-clamp-1"],[1,"text-gray-600","line-clamp-2"],[1,"w-full","flex","flex-row","gap-3"],["type","number","min","1","max","10",1,"monospace-text","border","border-gray-200","focus:border-blue-500","w-1/3","p-3",3,"formControl"],["type","button",1,"w-2/3","cursor-pointer","p-3","border","border-red-500","text-red-500","hover:bg-red-600","hover:text-white",3,"click"]],template:function(n,d){n&1&&(e(0,"div",0)(1,"div",1),g(2,"div",2),e(3,"div",3)(4,"p",4),i(5),t(),e(6,"p",5),i(7),t()()(),e(8,"div",6),g(9,"input",7),e(10,"button",8),m("click",function(){return d.remove()}),i(11," Remove "),t()()()),n&2&&(a(2),p("ngClass",d.product().color),a(3),l(d.product().title),a(2),l(d.product().description),a(2),p("formControl",d.quantityControl))},dependencies:[D,H,A,j,O,G,L,B],encapsulation:2})};function U(o,r){o&1&&(e(0,"div",1),i(1,"Your cart is empty, "),e(2,"span",2),i(3,"go home"),t()())}function W(o,r){if(o&1){let n=S();e(0,"app-invoice-product",16),m("removeProduct",function(c){s(n);let _=u(2);return v(_.remove(c))})("updateQuantity",function(c){let _=s(n).$implicit,z=u(2);return v(z.updateQuantity(_.id,c))}),t()}if(o&2){let n=r.$implicit;p("product",n.product)("quantity",n.quantity)}}function X(o,r){if(o&1){let n=S();e(0,"div",3)(1,"div",4)(2,"p",5),i(3,"Products recap"),t()(),e(4,"div",6),V(5,W,1,2,"app-invoice-product",7,T),t()(),e(7,"div",8)(8,"div",9)(9,"div",4)(10,"p",5),i(11,"Shipping info"),t()(),e(12,"div",10)(13,"div",11)(14,"p",12),i(15,"Nation:"),t(),e(16,"p",12),i(17,"Italy"),t()()(),e(18,"div",10)(19,"div",11)(20,"p",12),i(21,"Region:"),t(),e(22,"p",12),i(23,"Lazio"),t()()(),e(24,"div",10)(25,"div",11)(26,"p",12),i(27,"City:"),t(),e(28,"p",12),i(29,"Rome"),t()()(),e(30,"div",10)(31,"div",11)(32,"p",12),i(33,"CAP:"),t(),e(34,"p",12),i(35,"00042"),t()()(),e(36,"div",13)(37,"div",11)(38,"p",12),i(39,"Address:"),t(),e(40,"p",12),i(41,"Via del Lavatore, 12"),t()()(),e(42,"div",4)(43,"p",5),i(44,"Invoice info"),t()(),e(45,"div",10)(46,"div",11)(47,"p",12),i(48,"Amount:"),t(),e(49,"p",12),i(50),x(51,"currency"),t()()(),e(52,"div",10)(53,"div",11)(54,"p",12),i(55,"Shipping:"),t(),e(56,"p",12),i(57),x(58,"currency"),t()()(),e(59,"div",11)(60,"p",12),i(61,"Total:"),t(),e(62,"p",12),i(63),x(64,"currency"),t()()(),e(65,"div",14)(66,"button",15),m("click",function(){s(n);let c=u();return v(c.complete())}),i(67,"Complete order"),t()()()}if(o&2){let n=u();a(5),N(n.cart().products),a(45),l(b(51,3,n.cart().amount)),a(7),l(b(58,5,n.SHIPPING_COST)),a(6),l(b(64,7,n.total()))}}var Y=class o{service=w($);SHIPPING_COST=12.99;cart=P({amount:0,products:[],items:0});constructor(){this.service.cart$.subscribe({next:r=>{this.cart.set(r)},error:r=>{alert(r)}})}total=Q(()=>this.cart().amount+this.SHIPPING_COST);remove(r){this.service.remove(r)}updateQuantity(r,n){this.service.updateQuantity(r,n)}complete(){alert("You have completed this DEMO order!!")}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=f({type:o,selectors:[["app-cart"]],decls:3,vars:1,consts:[[1,"w-screen","h-screen","max-w-5xl","mx-auto","grid","grid-cols-2","p-4"],[1,"col-span-2","py-12","flex","justify-center","items-center"],["routerLink","/",1,"text-blue-500","underline","ps-1","cursor-pointer"],[1,"col-span-2","md:col-span-1","border","md:border-t","md:border-l","md:border-b","border-gray-200","h-full"],[1,"border-b","border-gray-200","p-4"],[1,"font-semibold","text-lg"],[1,"flex","flex-col","gap-3","max-h-custom-cart","overflow-y-auto"],[3,"product","quantity"],[1,"col-span-2","md:col-span-1","md:border-r","md:border-b","border-gray-200"],[1,"border","md:border-r-0","md:border-l-0","md:border-b","border-gray-200"],[1,"border-b","border-dashed","border-gray-200"],[1,"flex","flex-row","justify-between","items-center","p-4"],[1,"monospace-text","text-lg"],[1,"border-b","border-gray-200"],[1,"w-full","p-4"],["type","button",1,"w-full","p-3","bg-blue-500","text-white","hover:bg-blue-700","cursor-pointer",3,"click"],[3,"removeProduct","updateQuantity","product","quantity"]],template:function(n,d){n&1&&(e(0,"div",0),I(1,U,4,0,"div",1)(2,X,68,9),t()),n&2&&(a(),q(d.cart().items<1?1:2))},dependencies:[F,M,C],styles:[".max-h-custom-cart[_ngcontent-%COMP%]{max-height:calc(100vh - 6rem)}"]})};export{Y as Cart};
